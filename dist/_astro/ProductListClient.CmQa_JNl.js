import{j as s}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.DiEladB3.js";import{u as m}from"./useCart.B_6J7LxX.js";const u="https://images.unsplash.com/photo-1516594798947-e65505dbb29d?auto=format&fit=crop&w=900&q=80",p=155;function f({product:t,onAddToCart:a,index:l=0}){const[i,n]=o.useState(!1),c=t.images?.edges?.[0]?.node?.url,e=t.variants?.edges?.[0]?.node,r=`R${p.toFixed(2)} per bottle`;function h(){e?.availableForSale&&(a(e,t),n(!0),setTimeout(()=>n(!1),1200))}return s.jsxs("article",{className:"product-card",style:{animationDelay:`${l*60}ms`},children:[s.jsx("a",{href:`/product/${t.handle}`,style:{display:"block"},children:s.jsx("div",{className:"card-image",style:{aspectRatio:"1/1",position:"relative"},children:s.jsx("img",{src:c||u,alt:t.title,style:{width:"70%",height:"84%",objectFit:"contain",margin:"0 auto"},loading:"lazy"})})}),s.jsxs("div",{className:"product-card-body",children:[s.jsx("p",{className:"product-meta-label",children:"Estate Label"}),s.jsx("a",{href:`/product/${t.handle}`,children:s.jsx("h3",{className:"product-meta-title",children:t.title})}),s.jsx("p",{className:"product-meta-price",children:r}),e?.availableForSale?s.jsx("button",{type:"button",className:"btn-gold",onClick:h,style:{width:"100%",padding:"8px 12px",fontSize:"0.58rem"},children:i?"Added":"Add to cart"}):s.jsx("span",{className:"btn-outline",style:{width:"100%",justifyContent:"center",padding:"8px 12px",fontSize:"0.58rem",opacity:.6,cursor:"not-allowed"},children:"Sold out"})]})]})}const d=[{key:"best-sellers",label:"Best Sellers"},{key:"whites",label:"Whites"},{key:"reds",label:"Reds"},{key:"rose",label:"Rose"},{key:"sparkling",label:"Sparkling"}];function y(t){if(!t)return"best-sellers";const a=String(t).toLowerCase();return d.some(l=>l.key===a)?a:"best-sellers"}function b(t){const a=[t?.title,t?.handle,t?.productType,...Array.isArray(t?.tags)?t.tags:[]].filter(Boolean).join(" ").toLowerCase();return/(sparkling|champagne|cap classique|prosecco|cava)/.test(a)?"sparkling":/(rose|ros[eÃ©])/.test(a)?"rose":/(white|sauvignon|chenin|chardonnay|semillon|viognier)/.test(a)?"whites":/(red|merlot|cabernet|shiraz|pinot noir|malbec|syrah)/.test(a)?"reds":"best-sellers"}function j({products:t=[]}){const{addToCart:a}=m(),[l,i]=o.useState("best-sellers");o.useEffect(()=>{function e(){const r=new URLSearchParams(window.location.search);i(y(r.get("category")))}return e(),window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]);const n=o.useMemo(()=>l==="best-sellers"?t:t.filter(e=>b(e)===l),[t,l]);function c(e){if(i(e),typeof window>"u")return;const r=new URL(window.location.href);e==="best-sellers"?r.searchParams.delete("category"):r.searchParams.set("category",e),r.hash!=="#collection"&&(r.hash="collection"),window.history.replaceState({},"",r.toString())}return s.jsxs("section",{className:"catalog-layout",children:[s.jsx("div",{className:"catalog-tabs",role:"tablist","aria-label":"Collections",children:d.map(e=>s.jsx("button",{type:"button",className:l===e.key?"catalog-tab catalog-tab-active":"catalog-tab",onClick:()=>c(e.key),children:e.label},e.key))}),s.jsx("div",{className:"product-grid",children:n.length?n.map((e,r)=>s.jsx(f,{product:e,onAddToCart:a,index:r},e.id)):s.jsx("div",{className:"status-card category-empty",children:s.jsx("p",{children:"No products in this category yet."})})})]})}export{j as default};
